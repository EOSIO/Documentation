# EOS.IO, технічні білі папери

**14 листопад 2017, переведено @BlockchainLab.me (https://blockchainlab.me/)**

**Анотація:** EOS.IO — програмний комплекс, реалізований у новій блокчейн-архітектурі, що дозволяє здійснювати вертикальне та горизонтальне масштабування децентралізованих додатків. Така можливість досягається шляхом створення схеми, аналогічної до операційної системи, окрім якої передбачається розробка спеціальних додатків. Програмний комплекс, що розроблюється, включає в себе управління аккаунтами та аутентифікацією, бази даних, асинхронний обмін даними, а також управління чергою виконання операцій для додатків із можливістю розподілу завдань між сотнями процесорних ядер або цілими [серверними] кластерами. Результатом стала технологія, що є блокчейн-архітектурою, масштабованою до мільйонів транзакцій на секунду. Вона не вимагає від користувачів комісійних платежів за використання, а також дозволяє розгортати децентралізовані додатки легко і швидко.

**Зауваження: криптографічні токени, що про них ідеться в цих білих паперах, — це криптографічні токени блокчейна, що вже функціонує під управлінням EOS.IO. Вони не є ERC-20 сумісними токенами блокчейна Ethereum, пов'язаними з процесом розподілу токенів EOS.**

Copyright © 2017 block.one

Допускається використання, відтворення та розповсюдження будь-яких матеріалів із цього документа в некомерційному вигляді, а також із освітньою метою (наприклад, будь-які витяги, що не передбачають винагороди чи комерційної реалізації) без спеціального дозволу. Єдина умова — цитування оригінального джерела та, відповідно, згадка про авторські права.

**Відмова від відповідальності:** Цей драфт технічних білих паперів EOS.IO публікується лише з інформаційною метою. block.one не гарантує точності або висновків, наведених у цьому документі. Матеріал надається в такому вигляді, не гарантуючи повноти покриття та експліцитного або імпліцитного виконання перерахованих (але не обмежених ними) умов: (i) комерційна придатність, можливість конкретного застосування, іменування або недотримання (прав); (ii) недопущення помилок у тексті, можливість його застосування з конкретною метою; (iii) непорушення змістом цього паперу прав третіх осіб. block.one і будь-які афілійовані структури відмовляються від жодних зобов'язань і збитків, причиною яких може стати використання, згадка або посилання на інформацію, що міститься в цих паперах, а також будь-які рекомендації щодо імовірного настання таких наслідків. В жодному разі block.one чи її афілійовані особи не несуть відповідальності перед будь-якими особами чи організаціями за збитки, зобов'язання або витрати різного типу, включно з прямими, непрямими, компенсаційними, випадковими, фактичними та приблизними. Сюди ж належать збитки, що виникли внаслідок обґрунтування чи планування робіт на основі цих білих паперів або будь-якого змісту справжнього документу, включно з будь-якими втратами бізнесу, доходів, прибутку, даних, доступності, доброї волі та іншими нематеріальними збитками.
- [Вступ](#background)
- [Вимоги до додатків на основі блокчейна](#requirements-for-blockchain-applications) 
  - [Підтримка мільйонів користувачів](#support-millions-of-users)
  - [Можливість безкоштовного використання](#free-usage)
  - [Можливість простого оновлення та відновлення після збоїв](#easy-upgrades-and-bug-recovery)
  - [Швидкість відгуку](#low-latency)
  - [Послідовна продуктивність](#sequential-performance)
  - [Паралельна продуктивність](#parallel-performance)
- [Алгоритм консенсусу (DPOS)](#consensus-algorithm--dpos-) 
  - [Підтвердження транзакцій](#transaction-confirmation)
  - [Транзакції як Доказ Володіння Часткою (TaPoS)](#transaction-as-proof-of-stake--tapos-)
- [Аккаунти](#accounts) 
  - [Повідомлення і обробники](#messages---handlers)
  - [Управління правами доступу на основі ролей](#role-based-permission-management) 
    - [Іменовані рівні прав доступу](#named-permission-levels)
    - [Іменовані групи обробників повідомлень](#named-message-handler-groups)
    - [Прив'язка прав доступу](#permission-mapping)
    - [Застосування прав доступу](#evaluating-permissions) 
      - [Вихідні групи прав доступу](#default-permission-groups)
      - [Паралельний розбір прав доступу](#parallel-evaluation-of-permissions)
  - [Повідомлення з відкладеною доставкою](#messages-with-mandatory-delay)
  - [Відновлення викрадених ключів](#recovery-from-stolen-keys)
- [Детерміноване паралельне функціонування додатків](#deterministic-parallel-execution-of-applications) 
  - [Мінімізація комунікаційної затримки](#minimizing-communication-latency)
  - [Прочитання повідомлень виключно обробниками](#read-only-message-handlers)
  - [Атомарні транзакції з декількома аккаунтами](#atomic-transactions-with-multiple-accounts)
  - [Часткова оцінка стану блокчейна](#partial-evaluation-of-blockchain-state)
  - [Суб'єктивне планування найкращих результатів](#subjective-best-effort-scheduling)
- [Модель токена та вичерпання ресурсів](#token-model-and-resource-usage) 
  - [Об'єктивні та суб'єктивні вимірювання](#objective-and-subjective-measurements)
  - [Бізнес сплачує](#receiver-pays)
  - [Делегування потужностей](#delegating-capacity)
  - [Виокремлення вартості транзакції від фактичної цінності токена](#separating-transaction-costs-from-token-value)
  - [Вартість збереження стану](#state-storage-costs)
  - [Винагорода за блок](#block-rewards)
  - [Корисні для спільноти додатки](#community-benefit-applications)
- [Управління](#governance) 
  - [Заморожування аккаунтів](#freezing-accounts)
  - [Зміна коду аккаунта](#changing-account-code)
  - [Конституція](#constitution)
  - [Оновлення Протоколу & Конституції](#upgrading-the-protocol---constitution) 
    - [Екстрені зміни](#emergency-changes)
- [Скрипти & віртуальні машини](#scripts---virtual-machines) 
  - [Повідомлення, визначені схемою](#schema-defined-messages)
  - [Обумовлена схемою база даних](#schema-defined-database)
  - [Відокремлення аутентифікації від додатка](#separating-authentication-from-application)
  - [Незалежна архітектура віртуальної машини](#virtual-machine-independent-architecture) 
    - [Web Assembly (WASM)](#web-assembly)
    - [Віртуальна машина Ethereum (EVM)](#ethereum-virtual-machine--evm-)
- [Міжблокчейновий зв'язок](#inter-blockchain-communication) 
  - [Доказ Меркле для перевірки легкого клієнта (Light Client) (LCV)](#merkle-proofs-for-light-client-validation--lcv-)
  - [Затримка зв'язку між блокчейнами](#latency-of-interchain-communication)
  - [Доказ цілісності](#proof-of-completeness)
- [Висновок](#conclusion)

# Вступ

Технологія блокчейн була презентована в 2008 році одночасно з упровадженням валюти біткойн. Із того часу підприємці та розробники намагаються узагальнити технологію з метою підтримки більш широкого спектру додатків у межах єдиної блокчейн-платформи.

Тоді як безліч блокчейн-платформ прагнули реалізувати функціональні децентралізовані додатки, спеціалізовані системи, наприклад, децентралізована біржа BitShares (2014 року) і соціальна медіаплатформа Steem (2016), перетворилися на популярні блокчейн-спільноти з десятками тисяч активних користувачів щодня. Такі досягнення були спричинені зростанням продуктивності до тисяч операцій на секунду, зниженням затримки відповіді до 1,5 секунд, зменшенням обсягу комісії, а також наданням користувачам можливостей, які гарантують уже звичні централізовані сервіси.

Високі комісії та обмеження, що спричинені потребами в обчислювальних потужностях, перешкоджають упровадженню технології блокчейн і її адаптації до потреб спільноти.

# Вимоги до додатків на основі блокчейн

Для ширшого розповсюдження блокчейн-додатків необхідна гнучка платформа, що відповідатиме таким вимогам:

## Підтримка мільйонів користувачів

Видатні компанії, як-от eBay, Uber, Airbnb і Facebook, відчувають потребу в блокчейн-технології, що дозволяє обслуговувати мільйони активних користувачів щодня. В окремих випадках додаток не може працювати без заздалегідь визначеної кількості користувачів, а отже, платформа, здатна впоратися з масовим напливом користувачів, украй затребувана.

## Можливість безкоштовного використання

Розробникам доведеться бути гнучкими і пропонувати користувачам безкоштовні сервіси; користувачі не повинні платити за використання платформи або отримувати прибуток від її сервісів. Безкоштовна платформа, імовірно, зможе здобути більш широке розповсюдження. Унаслідок цього розробники та підприємці матимуть можливість реалізувати ефективні стратегії монетизації.

## Можливість простого оновлення та відновлення після збоїв

Підприємства, що розробляють додатки на базі блокчейна, мають бути гнучкими для розширення та поліпшення функціональності.
Будь-яке, окрім тривіального, програмне забезпечення може містити помилки навіть після ретельних перевірок. Платформа має допомагати вирішити неминучі в процесі її функціонування проблеми.

## Швидкість відгуку

Зручність використання диктує необхідність стійкого зворотного зв'язку із затримкою тривалістю не більше ніж декілька секунд. Довші паузи погіршують враження користувачів щодо блокчейн-додатків порівняно з уже відомими аналогами, що не базуються на блокчейні.

## Послідовна продуктивність

Деякі програми не можуть реалізовувати паралельні алгоритми через наявність послідовно залежних кроків. Наприклад, біржові додатки повинні забезпечувати достатню продуктивність послідовних обчислень для підтримки високих обсягів [торгів]. Тому платформа, що розроблюється, повинна мати високу продуктивність послідовних обчислень.

## Паралельна продуктивність

Додаткам великого масштабу необхідно розподіляти навантаження на кілька процесорів і комп'ютерів.

# Алгоритм консенсусу (DPOS)

EOS.IO застосовує єдиний децентралізований алгоритм консенсусу, здатний задовольнити потреби в продуктивності додатків на блокчейні: Делегований Доказ Володіння Часткою (Delegated Proof of Stake, DPOS). Згідно з цим алгоритмом, власники токенів блокчейна, адаптованого до EOS.IO, можуть обирати виробників блоків протягом безперервного голосування. Причому будь-хто може взяти участь у виробництві блоків із правом створити кількість блоків, пропорційну обсягу здобутих голосів на користь усіх інших виробників. У закритих блокчейнах керівництво могло б застосовувати токени для найму та звільнення IT-персоналу.
У EOS.IO блоки створюватимуться кожні 3 секунди, при цьому це право матиме тільки один виробник. Якщо блок не був створений згідно з розкладом, відповідний проміжок часу проминається. Якщо пропущено один або кілька блоків, у блокчейні залишається розрив тривалістю 6 або більше секунд.
У EOS.IO блоки створюються раундами. Гранична кількість блоків у одному раунді — 21. Кожен сет починається з вибору 21 унікального виробника. 20 найкращих із них автоматично беруть участь у кожному раунді, а останній обирається відповідно до кількості набраних голосів порівняно з іншими виробниками. Відібрані для раунду шикуються в чергу відповідно до псевдовипадкових номерів, здобутих із часу блоку. Таке розташування виробників покликане збалансувати зв'язки між ними.
Якщо виробник пропускає блок і не продукує жодного з них протягом 24 годин, він виключається з розгляду до спеціального повідомлення, яке повинен надіслати в блокчейн для підтвердження наміру продовжити роботу. Це забезпечує злагоджене функціонування мережі та мінімізує кількість пропущених блоків шляхом виключення ненадійних продуцентів із розкладу.
Зазвичай DPOS-блокчейни не схильні до розгалуження (виникнення форків), оскільки виробники блоків не конкурують між собою, а кооперуються. У разі, якщо розгалуження ланцюга все-таки відбувається, алгоритм консенсусу автоматично перемикається на найдовшу послідовність блоків. Ця схема працює, бо швидкість додавання блоків у гілку ланцюга безпосередньо залежить від відсотка виробників, задіяних у поточному консенсусі. Іншими словами, гілка блокчейна з великою кількістю виробників просто подовжується швидше порівняно з ланцюгом, що налічує меншу кількість виробників. Більш того, продуцент блоків не може виробляти їх для декількох гілок одночасно. Виробник, спійманий за цією справою, найімовірніше буде вилучений із процесу шляхом голосування. Для автоматизації усунення порушників можуть використовуватися криптографічні докази.

## Підтвердження транзакцій

У типових DPOS-блокчейнах у роботі беруть участь усі продуценти блоків. Транзакція може вважатися підтвердженою з ймовірністю 99,9 % протягом 1,5 секунд із моменту здійснення.

Можуть виникнути деякі екстраординарні ситуації, викликані збоєм у ПЗ, від’єднанням від інтернету або навмисними шкідливими діями з боку виробника блоків. У такому разі виникає відгалуження (форк). Для абсолютної впевненості в незворотності транзакції вузол мережі може потребувати підтвердження від 15 із 21 продуцентів блоків. Для стандартної конфігурації EOS.IO в нормальних умовах на це знадобиться 45 секунд. За замовчуванням усі вузли вважатимуть блок незворотним після отримання підтверджень від 15 з 21 виробників і не будуть перемикатися на гілку, що не містить цього блоку, незалежно від її довжини.

Вузол мережі може попереджати користувачів про високу ймовірність перебування на гілці меншості вже протягом перших 9 секунд із моменту переходу на таку гілку. Після 2-х послідовно пропущених блоків можливість виникнення вузла на гілці меншості дорівнює 95 %. Після 3-х — 99 %. Існує імовірність створення надійної моделі прогнозування, що на основі інформації про вимкнені вузли, недавніх рейтингів учасників та інших факторів могла б швидко попереджати користувачів про проблеми.

Реакція на такі перестороги повністю залежить від природи бізнес-транзакцій, але найпростіший шлях — дочекатися 15 із 21 підтверджень, після чого попередження зникне.

## Транзакції як Доказ Володіння Часткою (TaPoS)

EOS.IO вимагає включення в кожну транзакцію хешу від заголовка попереднього блоку. Цей хеш виконує дві функції:

  1. запобігає повторенню транзакції в гілці, що не містить згаданого блоку;
  2. повідомляє мережу про перебування певного користувача та його частки на певній гілці.

Пізніше всі користувачі безпосередньо визначать блокчейн як основний, що унеможливить підробку ланцюга через відсутність у зловмисника шансу перенести транзакції зі справжнього ланцюга.

# Аккаунти

EOS.IO дозволяє застосовувати як ідентифікатор аккаунта унікальні, доступні для людського сприйняття імена довжиною від 2 до 32 символів. Найменування обирається творцем аккаунта. Для забезпечення можливості зберігання стану рахунок аккаунта повинен бути поповнений мінімальною сумою в момент створення. Окрім того, імена облікових записів можуть містити покажчик на простір імен (namespace), при чому тільки власник аккаунта @domain може створювати облікові записи вигляду @user.domain.

У контексті децентралізації розробники додатків сплачуватимуть номінальні витрати на створення аккаунтів для своїх нових користувачів. Традиційний бізнес уже витрачає значні суми на залучення кожного нового клієнта, включно з рекламними витратами, безкоштовними послугами тощо. Порівняно з поточними видатками, вартість створення нового облікового запису в блокчейні буде мізерною. На щастя, аккаунти, що вже були зафіксовані користувачем у інших додатках, реєструвати наново не знадобиться.

## Повідомлення та обробники

Кожен аккаунт має можливість надсилати структуровані повідомлення іншим обліковим записам, а також здатен визначати процедури обробки вхідних повідомлень (скрипти). EOS.IO надає кожному аккаунту захищену базу даних, доступ до якої мають тільки персональні обробники повідомлень. Останні можуть посилати повідомлення іншим аккаунтам. Поєднання повідомлень і їхніх автоматизованих оброблювачів — це суть смарт-контрактів у межах EOS.IO.

## Управління правами доступу на основі ролей

Управління правами доступу передбачає визначення наявності прав доступу повідомлень. Найпростішою формою такого керування є перевірка наявності у транзакції необхідних підписів, проте це передбачає, що такі підписи вже відомі. Зазвичай влада надається деяким співробітникам або їхнім групам і часто розділена на окремі гілки. EOS.IO надає декларативну систему управління правами доступу, що гарантує аккаунтам ретельний багаторівневий контроль над тим, хто, що і коли може робити.

Стандартизація аутентифікації, управління правами доступу і відділення їх від бізнес-логіки додатка — критично важливі фактори. Це уможливлює створення інструментів управління правами доступу у звичайних середовищах розробки, а також забезпечує широкі можливості для оптимізації продуктивності.

Кожен аккаунт може контролюватися комбінацією інших аккаунтів і приватних ключів згідно з їхніми частками. Це формує ієрархічну адміністративну структуру, що відображатиме реальну організацію прав доступу і максимально спростить спільне управління коштами. Останнє, до речі, вносить найбільший вклад у безпеку і при правильному застосуванні здатне значно знизити ризик крадіжки шляхом злому.

EOS.IO дозволяє аккаунтам задавати комбінації ключів і/або інших облікових записів, які можуть надсилати повідомлення певних типів іншим аккаунтам. Наприклад, існує можливість наявності одного ключа для соціальних мереж користувача і іншого — для доступу до біржі. Імовірна навіть передача прав доступу одного аккаунта іншому на виконання дій від його особи без передачі при цьому ключів.

### Іменовані Рівні прав доступу

<img align="right" src="http://eos.io/wpimg/diagram3.png" width="228.395px" height="300px" />

Аккаунти EOS.IO можуть установлювати іменовані рівні прав доступу з можливістю успадкування дозволів від більш високого рівня (ієрархія прав доступу). Кожен іменований рівень доступу визначає одиницю адміністрування; така одиниця при цьому є процедурою перевірки мультипідписів із зазначенням порогів дії, ключів і/або іменованих рівнів доступу до інших аккаунтів. Наприклад, рівень доступу «Друг» може бути встановлений для облікового запису, який контролюватиметься в однаковій мірі аккаунтами всіх друзів користувача.

Інший приклад — блокчейн Steem, що має три іменовані рівні прав доступу, зафіксовані в коді: власник, активне право та право на публікацію. Останнє дає можливість здійснювати лише соціальні дії, як-от голосування та публікація записів, у той час як активне право дозволяє все, окрім зміни власника. Право власника краще зберігати на холодному носії (не під’єднаному до мережі), оскільки воно дозволяє виконання будь-яких дій із аккаунтом. Програмне забезпечення EOS.IO узагальнює такий підхід, даючи можливість кожному власникові облікового запису визначати власну ієрархію прав доступу, а також групувати дії.

### Іменовані групи обробників повідомлень

EOS.IO забезпечує кожному аккаунту можливість об'єднувати обробників повідомлень в ієрархічні іменовані групи. Вони можуть застосовуватись іншими аккаунтами в процесі зміни налаштувань їхніх рівнів доступу.

Обробники повідомлень верхнього рівня іменуються за назвою аккаунта, а нижнього — за індивідуальними типами повідомлень, що отримує аккаунт. Такі групи можуть бути знайдені так:  **@accountname.groupa.subgroupb.MessageType**.

Така модель дозволяє біржовому контракту групувати створення і скасування ордерів окремо від депозитів і виведення. Подібне групування за біржовим контрактом є загальноприйнятим для користувачів бірж.

### Прив'язка прав доступу

EOS.IO дає можливість кожному аккаунту визначати відповідність Іменованих обробників повідомлень будь-якого облікового запису до його Іменованого рівня доступу. Наприклад, власник аккаунта може встановити відповідність між своєю соціальною мережею і групою прав доступу «Друг». Із такою прив'язкою публікувати повідомлення в соціальній мережі власника аккаунта від його особи має право будь-який друг власника. І навіть незважаючи на те, що публікація здійснюватиметься від імені власника, для підписання повідомлень друзі будуть застосовувати персональні ключі. Це дозволяє визначити, хто з друзів використовував аккаунт, і як саме він був використаний.

### Застосування прав доступу

Протягом доставки повідомлення типу **Action** від **@Аліси** до **@Боба** EOS.IO насамперед перевірить, чи володіє **@Аліса** відповідними правами доступу для **@bob.groupa.subgroup.Action**. разі, якщо відповідності не знайдено, будуть послідовно перевірені права на **@bob.groupa.subgroup**, потім — **@bob.groupa**, і, насамкінець, на **@bob**. Якщо не знайдено жодних відповідностей, передбачається застосування іменованої групи дозволів **@alice.active**.

Як тільки відповідність знайдено, право підпису перевіряється з урахуванням порога мультипідпису і права іменованого дозволу. Якщо перевірка закінчується невдало, аналізуються батьківські дозволи аж до прав доступу власника, **@alice.owner**.

<img align="center" src="https://cdn.pbrd.co/images/cNxWAFPn.jpg" width="845.85px" height="500px" />

#### Вихідні групи прав доступу

Технологія EOS.IO надає всім аккаунтам можливість утримувати групу доступу «власник», члени якої мають повний доступ до всіх функцій, і групу «активні права доступу», яка може все, окрім зміни групи «власник». Усі інші групи прав доступу походять із групи «активні права доступу».

#### Паралельний розбір прав доступу

Розбір прав доступу є процесом у режимі «лише читання», а зміна прав здійснюється за допомогою транзакцій, які набувають чинності тільки після закінчення формування блоку. Це дозволяє здійснювати паралельний розбір ключів і дозволів для транзакцій. Більш того, це також уможливлює перевірку всіх дозволів до запуску логіки самого додатка, результатами роботи якої в разі порушення прав доступу довелося б знехтувати. І нарешті, такий підхід дозволяє перевіряти дозволи транзакцій не в момент їхнього застосування, а в момент отримання.

Із урахуванням усього вищесказаного перевірка дозволів охоплює значну частину загального процесу перевірки транзакції. Розпаралелювання і відсутність можливості внесення будь-яких змін робить процес перевірки дозволів значно продуктивнішим.

У процесі відтворення ланцюжка блоків за логами повідомлень з метою відновлення стану немає необхідності повторної перевірки дозволів. Сам факт того, що транзакція включена до підтвердженого раніше блока, є достатньою підставою пропустити етап перевірки прав доступу. Це значно знижує обчислювальне навантаження, пов'язане з повторним відтворенням транзакцій ланцюжка блоків, що невпинно подовжується.

## Повідомлення з відкладеною доставкою

Час є критичним компонентом безпеки. У більшості випадків дізнатися про викрадення приватного ключа неможливо доти, доки він не буде використаний. Безпека, заснована на часі, стає ще критичнішою у випадках, коли додаток вимагає зберігання ключів на комп'ютерах, що під’єднані до мережі і використовуються щодня. EOS.IO дає можливість розробникам додатків застосовувати певні повідомлення не в момент приєднання до блоку, а з певною визначеною мінімальною затримкою. Протягом такої примусової паузи повідомлення може бути скасовано.

У момент надсилання таких повідомлень користувачі можуть отримувати сповіщення з допомогою e-mail або SMS. Якщо повідомлення не було авторизовано, користувач може скористатися процедурою відновлення аккаунта і відкликати його.

Час затримки при цьому визначається важливістю операції, що міститься в повідомленні. Так, оплата кави може відбуватися без затримки і бути незворотною через кілька секунд, у той час як придбання нерухомості потребуватиме періоду для затвердження, що може сягати 72 годин. Передача самого аккаунта цілком під чиєсь управління може тривати до 30 днів. Точне значення часу затримки встановлюється розробниками програми та користувачами.

## Відновлення викрадених ключів

Програмне забезпечення EOS.IO дає користувачам можливість відновити контроль над своїм аккаунтом у випадку викрадення ключів. Власник облікового запису може застосовувати будь-який ключ власника, що був активним протягом останніх 30 днів, разом зі схваленням зазначеного партнера у справі відновлення аккаунта. Це допоможе перевстановити ключ власника на його аккаунт, щоб перевстановити ключ власника на його аккаунт. Обліковий запис партнера по відновленню не може перезавантажити контроль над аккаунтом власника без його безпосередньої допомоги.

Хакери не мають можливості здобути вигоду, намагаючись пройти через процес відновлення, бо вони вже «контролюють» аккаунт. Окрім того, якщо хакер спробує це здійснити, партнер по відновленню швидше за все зажадає ідентифікації та багатофакторної перевірки автентичності (телефон та електронна пошта). Це скомпрометує хакера чи позбавить його усілякої вигоди.

Цей процес разюче відрізняється від звичайної угоди з мультипідписом. У випадку з мультипідписаною транзакцією існує ще одна сторона, що бере участь у кожній здійсненій транзакції; але в процесі відновлення агент — це лише частина відновного процесу, він не керує щоденними транзакціями. Це значно скорочує витрати і юридичні зобов'язання всіх учасників.

# Детерміноване паралельне виконання додатків

Консенсус блокчейна залежить від детермінованої (відтвореної) поведінки. Це означає, що всі паралельні виконання мають бути вільними від взаємовиключення та інших блокуючих примітивів. Відсутність останніх має в певний спосіб гарантувати, що всі аккаунти можуть лише читати і записувати їхні приватні бази даних. Це також означає, що кожен обліковий запис обробляє повідомлення послідовно і що паралельність буде на рівні аккаунту.

У блокчейні на базі EOS.IO в завдання виробника блоків входить організація доставки повідомлень в незалежні потоки для паралельної обробки. Стан кожного аккаунта залежить тільки від отриманих повідомлень. Розклад транзакцій — це висновок виробника блоків, він буде закономірно виконаний, але процес його створення не має бути детерміністичним. Це означає, що виробникам блоків можна застосовувати паралельні алгоритми для створення розкладу транзакцій.

Роль паралельного виконання така: коли скрипт створює нове повідомлення, воно не надсилається негайно, натомість його доставка запланована на наступний цикл. Причина, із якої воно не може бути доставленим негайно, полягає в тому, що одержувач може активно змінювати свій стан в іншому потоці.

## Мінімізація комунікаційної затримки

Затримка — це час, потрібний для надсилання повідомлення від одного облікового запису до іншого, а також на отримання відповіді. Мета полягає в тому, аби дозволити двом аккаунтам здійснювати двосторонній обмін повідомленнями в межах одного блока без секундного очікування між кожним повідомленням. Аби надати таку можливість, програмне забезпечення EOS.IO ділить кожен блок на цикли. Кожен із них у свою чергу членується на потоки, що містять перелік транзакцій. Транзакція охоплює набір повідомлень, що будуть доставлені. Цю структуру можна зобразити у вигляді дерева, де шари, які чергуються, обробляються послідовно і паралельно.

        Блок
    
          Цикли (послідовні)
    
            Потоки (паралельні)
    
              Транзакції (послідовні)
    
                 Повідомлення (послідовні)
    
                  Одержувач і повідомлені аккаунти (паралельні)
    

Транзакції, вироблені в одному циклі, можуть доставлятися в будь-який наступний цикл або блок. Виробники блоків додаватимуть цикли в блок, доки не скінчиться час або доки не припинять створюватися нові транзакції для доставки.

Можна застосовувати статичний аналіз блоку, аби переконатися, що в певному циклі немає двох потоків, які містять транзакції та змінюють один і той же обліковий запис. Доки така інваріантність зберігається, блок може бути оброблений паралельним запуском всіх потоків.
